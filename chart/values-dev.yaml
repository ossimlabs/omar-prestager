# Default values for chart.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# This chart is to be used for standalone deployment
# for development purposes.  AppName and any configMap
# should not have the same name as app already deployed
# in the same namespace by the 3pa parent chart.

replicas: 1

appName: omar-prestager-test

global:
  useTls: true
  useTLSClientAuth: false
  sslCertSecretName: ssl-certs
  authSslCertSecretName: pki-ssl-certs

  dockerRepository: nexus-docker-public-hosted.ossim.io
  imagePullSecret:
    registry: nexus-3pa-dev-docker-proxy.ossim.io
    username: radiantcibot
    password: lhLvXspFyX9wraf6jB1I
  hostname: omar-3pa-dev.ossim.io

  createIngress: true
  createImagePullSecret: true
  useImagePullSecret: true

  createHpa: true
  createPVs: true #True to create the pvcs
  useSpringConfigServer: false

  # This is used in the helper to create the pvcs
  volumes:
    ossim-data:
      type: nfs
      nfsServer:  10.70.40.254
      nfsMountPoint: /omar-3pa-dev-nfs
      accessModes:
        - ReadWriteMany
      size: 500Gi
      mountPath: /data

    maxar-blacksky-data:
      type: nfs
      nfsServer:  10.70.40.254
      nfsMountPoint: /maxar-blacksky-data
      accessModes:
        - ReadWriteMany
      size: 500Gi
      mountPath: /maxar-blacksky-data

    maxar-skysat-data:
      type: nfs
      nfsServer:  10.70.40.254
      nfsMountPoint: /maxar-skysat-data
      accessModes:
        - ReadWriteMany
      size: 500Gi
      mountPath: /maxar-skysat-data      


# These are used in the helper to create the pvcs, if no mounts are needed remove
volumeNames:
  - ossim-data
  - maxar-blacksky-data
  - maxar-skysat-data

existingVolumes:
  scratch-volume:
    type: empty
    mountPath: /scratch
 

# This is overwritten by skaffold, if override is specified
# in the skaffold.yaml
image:
  name: omar-prestager
  tag: latest
  pullPolicy: Always


ingressPath: /omar-prestager
internalPort: 8080
externalPort: 8080

readinessProbe:
  path: /health
  port: 8080
  initialDelaySeconds: 5
  timeoutSeconds: 3
livenessProbe:
  path: /health
  port: 8080
  initialDelaySeconds: 5
  timeoutSeconds: 3
  failureThreshold: 10

resources:
  limits:
    cpu: 3000m
    memory: 2Gi
  requests:
    cpu: 1000m
    memory: 1Gi

# This information should be included in the parent chart in order to overwrite the values here
database:
  name: o2_omar_db
  host: omar-3pa-dev-aurora-rdsdbcluster-lw6rbkhnvkrk.cluster-cfussmnw2zzg.us-east-1.rds.amazonaws.com
  user: postgres
  password: qKcSn=3G|3~54*gO
  port: 5432
